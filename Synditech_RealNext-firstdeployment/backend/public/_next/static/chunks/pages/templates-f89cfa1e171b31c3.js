(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5240],{68067:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/templates",function(){return r(38060)}])},38060:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var s=r(85893),a=r(67294),l=r(11163),n=r(80195),o=r(1153),i=r(21438),d=r(86501),c=r(98523),m=r(62940),x=r(76249),u=r(31415),p=r(78680),h=r(49633),b=r(29227);let g=e=>{let{template:t,onEdit:r,onDelete:a,onPreview:l,onUse:n}=e;return(0,s.jsxs)("div",{className:"bg-card border border-border/50 rounded-xl p-6 hover:border-primary/30 transition-all duration-200 group",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-black transition-colors",children:(0,s.jsx)(c.Z,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-white group-hover:text-primary transition-colors",children:t.name}),(0,s.jsx)("p",{className:"text-sm text-gray-400 capitalize",children:t.category})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[t.is_system&&(0,s.jsx)("span",{className:"px-2.5 py-0.5 text-xs font-semibold rounded-full bg-blue-500/10 text-blue-500 border border-blue-500/20",children:"System"}),(0,s.jsx)("span",{className:"px-2.5 py-0.5 text-xs font-semibold rounded-full ".concat("APPROVED"===t.status?"bg-green-500/10 text-green-500 border border-green-500/20":"bg-yellow-500/10 text-yellow-500 border border-yellow-500/20"),children:t.status||"PENDING"})]})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("p",{className:"text-sm text-gray-300 line-clamp-3",children:(()=>{let e="";if(Array.isArray(t.components)){let r=t.components.find(e=>"BODY"===e.type);e=(null==r?void 0:r.text)||""}else"string"==typeof t.content&&(e=t.content);return e.length>150?e.substring(0,150)+"...":e})()})}),t.components&&t.components.some(e=>{var t;return null===(t=e.text)||void 0===t?void 0:t.includes("{{")})&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Placeholders Detected"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.components.flatMap(e=>{var t;return(null===(t=e.text)||void 0===t?void 0:t.match(/{{(\d+)}}/g))||[]}).map(e=>(0,s.jsx)("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-primary/10 text-primary border border-primary/20",children:e},e))})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-border/50 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["Language: ",(0,s.jsx)("span",{className:"text-white font-medium",children:t.language})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>l(t),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-lg text-gray-300 bg-muted hover:bg-muted/80 border border-border/50 hover:border-border transition-all",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 mr-1.5"}),"Preview"]}),(0,s.jsxs)("button",{onClick:()=>a(t),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-lg text-red-400 bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 hover:border-red-500/30 transition-all",children:[(0,s.jsx)(x.Z,{className:"h-4 w-4 mr-1.5"}),"Delete"]}),(0,s.jsx)("button",{onClick:()=>n(t),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-lg text-black bg-primary hover:bg-primary/90 transition-all shadow-glow-sm",children:"Use Template"})]})]})]})},f=e=>{var t;let{template:r,isOpen:a,onClose:l}=e;return a&&r?(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 transition-opacity",onClick:l,children:(0,s.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"})}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-card border border-border rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[(0,s.jsxs)("div",{className:"bg-card px-6 pt-6 pb-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:r.name}),(0,s.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(u.Z,{className:"h-6 w-6"})})]}),(0,s.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 border border-border/50",children:(0,s.jsx)("div",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:Array.isArray(r.components)?r.components.map((e,t)=>(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("span",{className:"text-xs text-primary uppercase font-bold",children:[e.type,":"]}),(0,s.jsx)("p",{children:e.text})]},t)):(null===(t=r.content)||void 0===t?void 0:t.body)||JSON.stringify(r.content,null,2)})})]}),(0,s.jsx)("div",{className:"bg-muted/20 px-6 py-4 flex justify-end border-t border-border/50",children:(0,s.jsx)("button",{type:"button",className:"px-4 py-2 bg-primary text-black text-sm font-medium rounded-lg hover:bg-primary/90 transition-all shadow-glow-sm",onClick:l,children:"Close"})})]})]})}):null};function v(){let[e,t]=(0,a.useState)([]),[r,m]=(0,a.useState)(!0),[x,u]=(0,a.useState)(""),[v,y]=(0,a.useState)(""),[j,w]=(0,a.useState)(null),[N,k]=(0,a.useState)(!1),{user:C,loading:E}=(0,o.a)(),Z=(0,l.useRouter)();(0,a.useEffect)(()=>{E||C?C&&L():Z.push("/")},[C,E,x,v]);let L=async()=>{try{let e={search:x,category:v};console.log("Fetching templates with params:",e);let r=await i.J5.getTemplates(e);console.log("Templates Response:",r);let s=r.data;t(Array.isArray(s)?s:s.data||[])}catch(e){console.error("Failed to fetch templates:",e),d.ZP.error("Failed to load templates details: "+(e.message||"Unknown error"))}finally{console.log("Fetch finished, setting loading to false"),m(!1)}},_=async e=>{if(confirm('Are you sure you want to delete the template "'.concat(e.name,'"?')))try{await i.J5.deleteTemplate(e.name),d.ZP.success("Template deleted successfully"),L()}catch(e){console.error("Failed to delete template:",e),d.ZP.error("Failed to delete template")}},A=e=>{Z.push("/templates/".concat(e.id,"/edit"))},P=e=>{w(e),k(!0)},O=e=>{var t;let r="string"==typeof e.content?e.content:(null===(t=e.content)||void 0===t?void 0:t.body)||JSON.stringify(e.content);navigator.clipboard.writeText(r).then(()=>{d.ZP.success("Template content copied to clipboard!"),Z.push("/campaigns/new")}).catch(()=>{d.ZP.error("Failed to copy template content")})};return r||E?(0,s.jsx)(n.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):(0,s.jsx)(n.Z,{children:(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Message templates"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Create and manage your WhatsApp message templates"})]}),(0,s.jsxs)("button",{onClick:()=>Z.push("/templates/new"),className:"inline-flex items-center px-4 py-2.5 bg-primary text-black font-medium rounded-lg hover:bg-primary/90 transition-all shadow-glow-sm",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5 mr-2"}),"Create Template"]})]}),(0,s.jsx)("div",{className:"bg-card border border-border/50 rounded-xl p-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(h.Z,{className:"h-5 w-5 text-gray-500"})}),(0,s.jsx)("input",{type:"text",placeholder:"Search templates...",className:"block w-full pl-10 pr-3 py-2.5 bg-muted border border-border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",value:x,onChange:e=>u(e.target.value)})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("select",{className:"block w-full px-3 py-2.5 bg-muted border border-border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",value:v,onChange:e=>y(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"All Categories"}),["general","greeting","follow_up","closing","property_info","negotiation"].map(e=>(0,s.jsx)("option",{value:e,children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))]})}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)("button",{onClick:L,className:"inline-flex items-center px-4 py-2.5 bg-muted border border-border text-white font-medium rounded-lg hover:bg-muted/80 hover:border-border/80 transition-all text-sm",children:[(0,s.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"Apply Filters"]})})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-6",children:0===e.length?(0,s.jsxs)("div",{className:"bg-card border border-border/50 rounded-xl p-12 text-center",children:[(0,s.jsx)(c.Z,{className:"mx-auto h-16 w-16 text-gray-600 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"No templates found"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:"Get started by creating your first message template."}),(0,s.jsxs)("button",{onClick:()=>Z.push("/templates/new"),className:"inline-flex items-center px-4 py-2 bg-primary text-black font-medium rounded-lg hover:bg-primary/90 transition-all shadow-glow-sm",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5 mr-2"}),"Create Template"]})]}):e.map(e=>(0,s.jsx)(g,{template:e,onEdit:A,onDelete:_,onPreview:P,onUse:O},e.id))}),(0,s.jsx)(f,{template:j,isOpen:N,onClose:()=>{k(!1),w(null)}})]})})}},62940:function(e,t,r){"use strict";var s=r(67294);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});t.Z=a},29227:function(e,t,r){"use strict";var s=r(67294);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))});t.Z=a},49633:function(e,t,r){"use strict";var s=r(67294);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});t.Z=a},78680:function(e,t,r){"use strict";var s=r(67294);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});t.Z=a},76249:function(e,t,r){"use strict";var s=r(67294);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});t.Z=a}},function(e){e.O(0,[1664,9638,195,9774,2888,179],function(){return e(e.s=68067)}),_N_E=e.O()}]);