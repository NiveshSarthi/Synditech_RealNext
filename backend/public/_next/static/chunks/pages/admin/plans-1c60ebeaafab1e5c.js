(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4867],{36410:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/plans",function(){return s(34569)}])},90618:function(e,t,s){"use strict";s.d(t,{z:function(){return n}});var r=s(85893);let n=s(67294).forwardRef((e,t)=>{let{children:s,variant:n="primary",size:a="md",className:l="",isLoading:i=!1,disabled:c,...o}=e;return(0,r.jsxs)("button",{ref:t,className:"\n        ".concat("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none active:scale-95 ring-offset-background"," \n        ").concat({primary:"bg-primary text-[#0E1117] hover:bg-primary/90 shadow-[0_0_15px_rgba(249,115,22,0.3)] hover:shadow-[0_0_20px_rgba(249,115,22,0.5)] border border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border border-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",link:"text-primary underline-offset-4 hover:underline"}[n]," \n        ").concat({sm:"h-8 px-3 text-xs",md:"h-10 px-4 py-2 text-sm",lg:"h-12 px-8 text-base",icon:"h-10 w-10"}[a]," \n        ").concat(i?"opacity-70 cursor-wait":"","\n        ").concat(l,"\n      "),disabled:c||i,...o,children:[i&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]})});n.displayName="Button"},14404:function(e,t,s){"use strict";s.d(t,{Ol:function(){return a},SZ:function(){return i},Zb:function(){return n},aY:function(){return c},eW:function(){return o},ll:function(){return l}});var r=s(85893);s(67294);let n=e=>{let{children:t,className:s="",hover:n=!0,...a}=e;return(0,r.jsx)("div",{className:"\n        bg-card text-card-foreground rounded-xl border border-border/50\n        ".concat(n?"hover:border-primary/50 transition-colors duration-300":""," \n        ").concat(s,"\n      "),...a,children:t})},a=e=>{let{children:t,className:s="",...n}=e;return(0,r.jsx)("div",{className:"p-6 pb-2 ".concat(s),...n,children:t})},l=e=>{let{children:t,className:s="",...n}=e;return(0,r.jsx)("h3",{className:"text-lg font-semibold leading-none tracking-tight ".concat(s),...n,children:t})},i=e=>{let{children:t,className:s="",...n}=e;return(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1.5 ".concat(s),...n,children:t})},c=e=>{let{children:t,className:s="",...n}=e;return(0,r.jsx)("div",{className:"p-6 pt-2 ".concat(s),...n,children:t})},o=e=>{let{children:t,className:s="",...n}=e;return(0,r.jsx)("div",{className:"flex items-center p-6 pt-0 ".concat(s),...n,children:t})}},26003:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var r=s(85893);let n=s(67294).forwardRef((e,t)=>{let{className:s="",error:n,label:a,...l}=e;return(0,r.jsxs)("div",{className:"w-full",children:[a&&(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:a}),(0,r.jsx)("input",{className:"\n          flex h-10 w-full rounded-lg border border-input bg-background/50 px-3 py-2 text-sm \n          ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium \n          placeholder:text-muted-foreground \n          focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\n          disabled:cursor-not-allowed disabled:opacity-50\n          transition-all duration-200\n          ".concat(n?"border-destructive focus-visible:ring-destructive":"focus:border-primary/50","\n          ").concat(s,"\n        "),ref:t,...l}),n&&(0,r.jsx)("p",{className:"mt-1 text-xs text-destructive",children:n})]})});n.displayName="Input"},89647:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(85893),n=s(9904);function a(e){let{enabled:t,onChange:s,srTitle:a}=e;return(0,r.jsxs)(n.r,{checked:t,onChange:s,className:"".concat(t?"bg-primary shadow-[0_0_10px_rgba(249,115,22,0.4)]":"bg-muted"," relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 ring-offset-background"),children:[(0,r.jsx)("span",{className:"sr-only",children:a||"Enable setting"}),(0,r.jsx)("span",{className:"".concat(t?"translate-x-6":"translate-x-1"," inline-block h-4 w-4 transform rounded-full bg-white transition-transform")})]})}},34569:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(85893),n=s(67294),a=s(80195),l=s(21438),i=s(14404),c=s(90618),o=s(26003),d=s(89647),u=s(78680),x=s(49633),m=s(10050),h=s(5362),f=s(48974),p=s(76249),b=s(86501);function g(){let[e,t]=(0,n.useState)([]),[s,g]=(0,n.useState)(!0),[j,y]=(0,n.useState)(""),[v,N]=(0,n.useState)(!1),[w,_]=(0,n.useState)(null),[P,k]=(0,n.useState)({name:"",code:"",price_monthly:0,price_yearly:0,trial_days:14,description:"",is_public:!0,is_active:!0});(0,n.useEffect)(()=>{C()},[]);let C=async()=>{try{g(!0);let e=await l.Sb.getPlans();e.data.success&&t(e.data.data)}catch(e){b.ZP.error("Failed to load plans"),console.error(e)}finally{g(!1)}},Z=async e=>{e.preventDefault();try{w?(await l.Sb.updatePlan(w,P),b.ZP.success("Plan updated successfully")):(await l.Sb.createPlan(P),b.ZP.success("Plan created successfully")),N(!1),I(),C()}catch(e){b.ZP.error(w?"Failed to update plan":"Failed to create plan"),console.error(e)}},S=e=>{_(e.id),k({name:e.name,code:e.code,price_monthly:e.price_monthly,price_yearly:e.price_yearly||0,trial_days:e.trial_days,description:e.description||"",is_public:e.is_public,is_active:e.is_active}),N(!0)},E=async e=>{if(confirm("Are you sure you want to delete this plan? This action cannot be undone."))try{await l.Sb.deletePlan(e),b.ZP.success("Plan deleted"),C()}catch(e){b.ZP.error("Failed to delete plan")}},I=()=>{_(null),k({name:"",code:"",price_monthly:0,price_yearly:0,trial_days:14,description:"",is_public:!0,is_active:!0})},z=e.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())||e.code.toLowerCase().includes(j.toLowerCase()));return(0,r.jsx)(a.Z,{children:(0,r.jsxs)("div",{className:"container-custom py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold font-display text-foreground",children:"Subscription Plans"}),(0,r.jsx)("p",{className:"mt-1 text-muted-foreground",children:"Manage pricing tiers and feature packages."})]}),(0,r.jsxs)(c.z,{onClick:()=>{I(),N(!0)},children:[(0,r.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"Create Plan"]})]}),(0,r.jsx)(i.Zb,{className:"mb-6 p-4",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),(0,r.jsx)(o.I,{placeholder:"Search plans...",className:"pl-10",value:j,onChange:e=>y(e.target.value)})]})}),(0,r.jsx)("div",{className:"bg-card border border-border rounded-xl overflow-hidden shadow-sm",children:(0,r.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,r.jsx)("thead",{className:"bg-muted/50 text-xs uppercase text-muted-foreground font-semibold",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4",children:"Plan Name"}),(0,r.jsx)("th",{className:"px-6 py-4",children:"Code"}),(0,r.jsx)("th",{className:"px-6 py-4",children:"Monthly Price"}),(0,r.jsx)("th",{className:"px-6 py-4",children:"Trial Days"}),(0,r.jsx)("th",{className:"px-6 py-4",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-border",children:s?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"6",className:"p-8 text-center text-muted-foreground",children:"Loading plans..."})}):0===z.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"6",className:"p-8 text-center text-muted-foreground",children:"No plans found."})}):z.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-muted/10 transition-colors",children:[(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("div",{className:"font-medium text-foreground",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:e.description})]}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm font-mono text-muted-foreground",children:e.code}),(0,r.jsxs)("td",{className:"px-6 py-4 text-sm text-foreground",children:["₹",e.price_monthly]}),(0,r.jsxs)("td",{className:"px-6 py-4 text-sm text-muted-foreground",children:[e.trial_days," days"]}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[e.is_active?(0,r.jsxs)("span",{className:"text-xs text-green-600 flex items-center",children:[(0,r.jsx)(m.Z,{className:"w-3 h-3 mr-1"})," Active"]}):(0,r.jsxs)("span",{className:"text-xs text-red-600 flex items-center",children:[(0,r.jsx)(h.Z,{className:"w-3 h-3 mr-1"})," Inactive"]}),e.is_public?(0,r.jsx)("span",{className:"text-xs text-blue-600 flex items-center",children:"Public"}):(0,r.jsx)("span",{className:"text-xs text-gray-500 flex items-center",children:"Private"})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 text-right space-x-2",children:[(0,r.jsx)("button",{onClick:()=>S(e),className:"text-primary hover:text-primary/80 transition-colors",children:(0,r.jsx)(f.Z,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:()=>E(e.id),className:"text-destructive hover:text-destructive/80 transition-colors",children:(0,r.jsx)(p.Z,{className:"w-5 h-5"})})]})]},e.id))})]})}),v&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:(0,r.jsxs)("div",{className:"bg-card w-full max-w-lg rounded-xl shadow-2xl p-6 border border-border m-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold font-display text-foreground",children:w?"Edit Plan":"Create New Plan"}),(0,r.jsx)("button",{onClick:()=>N(!1),className:"text-muted-foreground hover:text-foreground",children:(0,r.jsx)(h.Z,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Plan Name"}),(0,r.jsx)(o.I,{required:!0,value:P.name,onChange:e=>k({...P,name:e.target.value}),placeholder:"Pro Plan"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Plan Code"}),(0,r.jsx)(o.I,{required:!0,value:P.code,onChange:e=>k({...P,code:e.target.value}),placeholder:"pro_monthly"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Monthly Price (₹)"}),(0,r.jsx)(o.I,{type:"number",required:!0,value:P.price_monthly,onChange:e=>k({...P,price_monthly:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Yearly Price (₹)"}),(0,r.jsx)(o.I,{type:"number",value:P.price_yearly,onChange:e=>k({...P,price_yearly:e.target.value})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Trial Days"}),(0,r.jsx)(o.I,{type:"number",value:P.trial_days,onChange:e=>k({...P,trial_days:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Description"}),(0,r.jsx)("textarea",{className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",rows:"3",value:P.description,onChange:e=>k({...P,description:e.target.value}),placeholder:"Plan details..."})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Active Status"}),(0,r.jsx)(d.Z,{enabled:P.is_active,onChange:e=>k({...P,is_active:e})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Publicly Visible"}),(0,r.jsx)(d.Z,{enabled:P.is_public,onChange:e=>k({...P,is_public:e})})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)(c.z,{variant:"outline",type:"button",onClick:()=>N(!1),children:"Cancel"}),(0,r.jsx)(c.z,{type:"submit",children:w?"Update Plan":"Create Plan"})]})]})]})})]})})}}},function(e){e.O(0,[1664,9638,6336,195,9774,2888,179],function(){return e(e.s=36410)}),_N_E=e.O()}]);