(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4583],{48178:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/analytics",function(){return a(72419)}])},72419:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var s=a(85893),l=a(67294),d=a(80195),n=a(21438),o=a(85973),i=a(78357),r=a(65350),c=a(61612),x=a(13658),u=a(20445),h=a(4055),m=a(19989),v=a(29009),g=a(46888),b=a(14195),j=a(3023),p=a(75358),f=a(26050),w=a(86108),y=a(73604),N=a(46208),_=a(43815),S=a(33558);function k(){var e,t,a,h,m,k,B,R,D,A;let[E,Z]=(0,l.useState)(!0),[F,M]=(0,l.useState)("7"),[O,T]=(0,l.useState)(null),[K,V]=(0,l.useState)([]),[q,z]=(0,l.useState)(null),[P,W]=(0,l.useState)(null);(0,l.useEffect)(()=>{X()},[F]);let X=async()=>{Z(!0),W(null);try{var e,t,a,s,l,d,o,i,r;let[c,x,u]=await Promise.all([n.n9.getDashboard(),n.n9.getConversationAnalytics({period:F}),n.n9.getContactAnalytics()]),h=c.data.data,m={leadStats:{totalLeads:(null===(e=h.leads)||void 0===e?void 0:e.total)||0,new_leads:(null===(t=h.leads)||void 0===t?void 0:t.new_30_days)||0,contacted_leads:Math.floor(.4*((null===(a=h.leads)||void 0===a?void 0:a.total)||0)),qualified_leads:Math.floor(.2*((null===(s=h.leads)||void 0===s?void 0:s.total)||0)),closed_leads:Math.floor(.1*((null===(l=h.leads)||void 0===l?void 0:l.total)||0)),conversion_rate:(null===(d=h.leads)||void 0===d?void 0:d.growth)?Math.round(h.leads.growth):0},campaignStats:{totalCampaigns:(null===(o=h.campaigns)||void 0===o?void 0:o.active)||0,avg_response_rate:15},revenueStats:{totalRevenue:0,deals:0},recentActivity:h.recent_activity||[]};T(m),V((null===(r=x.data.data.datasets)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.data.map((e,t)=>({date:x.data.data.labels[t],count:e})))||[]),z(u.data.data)}catch(e){console.error("Analytics fetch error:",e),W("Failed to load analytics data.")}finally{Z(!1)}};if(E&&!O)return(0,s.jsx)(d.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})});let G=["#F97316","#3B82F6","#10B981","#EF4444","#8B5CF6"];return(0,s.jsx)(d.Z,{children:(0,s.jsxs)("div",{className:"space-y-8 animate-fade-in content-container pb-10",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Analytics dashboard"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Real-time insights into your automation and business performance."})]}),(0,s.jsxs)("div",{className:"flex bg-[#161B22] rounded-lg p-1 border border-white/5",children:[["7","30","90"].map(e=>(0,s.jsx)("button",{onClick:()=>M(e),className:"px-4 py-1.5 text-sm font-medium rounded-md transition-all ".concat(F===e?"bg-primary text-black shadow-glow-sm":"text-gray-400 hover:text-white hover:bg-white/5"),children:"90"===e?"3 Months":"".concat(e," Days")},e)),(0,s.jsx)("button",{onClick:X,className:"ml-2 px-3 py-1.5 text-gray-400 hover:text-white hover:bg-white/5 rounded-md",title:"Refresh Data",children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})]})]}),O&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsx)(C,{title:"Total Leads",value:O.leadStats.totalLeads,subValue:"+".concat(O.leadStats.new_leads," New"),icon:i.Z,trend:"up"}),(0,s.jsx)(C,{title:"Campaigns Sent",value:O.campaignStats.totalCampaigns,subValue:"".concat(O.campaignStats.avg_response_rate,"% Response Rate"),icon:r.Z,trend:"neutral"}),(0,s.jsx)(C,{title:"Revenue (Est.)",value:"â‚¹".concat(O.revenueStats.totalRevenue.toLocaleString()),subValue:"".concat(O.revenueStats.deals," Deals Closed"),icon:c.Z,trend:"up",isCurrency:!0}),(0,s.jsx)(C,{title:"Conversion Rate",value:"".concat(O.leadStats.conversion_rate,"%"),subValue:"Lead to Close",icon:x.Z,trend:O.leadStats.conversion_rate>10?"up":"neutral"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 bg-card border border-border/50 rounded-xl p-6 shadow-soft",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:"Conversation volume"}),(0,s.jsx)("div",{className:"h-[300px] w-full",children:(0,s.jsx)(v.h,{width:"100%",height:"100%",children:(0,s.jsxs)(g.T,{data:K,children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"colorCount",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"#F97316",stopOpacity:.3}),(0,s.jsx)("stop",{offset:"95%",stopColor:"#F97316",stopOpacity:0})]})}),(0,s.jsx)(b.q,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)",vertical:!1}),(0,s.jsx)(j.K,{dataKey:"date",stroke:"#6B7280",fontSize:12,tickLine:!1,tickFormatter:e=>{let t=new Date(e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1)}}),(0,s.jsx)(p.B,{stroke:"#6B7280",fontSize:12,tickLine:!1,axisLine:!1}),(0,s.jsx)(f.u,{content:(0,s.jsx)(e=>{let{active:t,payload:a,label:l}=e;return t&&a&&a.length?(0,s.jsxs)("div",{className:"bg-[#161B22] border border-white/10 p-3 rounded-lg shadow-xl",children:[(0,s.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:new Date(l).toLocaleDateString()}),(0,s.jsxs)("p",{className:"text-primary font-bold text-sm",children:[a[0].value," Conversations"]})]}):null},{}),cursor:{stroke:"rgba(255,255,255,0.1)",strokeWidth:2}}),(0,s.jsx)(w.u,{type:"monotone",dataKey:"count",stroke:"#F97316",strokeWidth:2,fillOpacity:1,fill:"url(#colorCount)"})]})})})]}),(0,s.jsxs)("div",{className:"bg-card border border-border/50 rounded-xl p-6 shadow-soft flex flex-col",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Lead engagement"}),(0,s.jsxs)("div",{className:"flex-1 min-h-[250px] relative",children:[(null==q?void 0:q.engagementBreakdown)?(0,s.jsx)(v.h,{width:"100%",height:"100%",children:(0,s.jsxs)(y.u,{children:[(0,s.jsx)(N.b,{data:q.engagementBreakdown,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"count",nameKey:"engagement_level",children:q.engagementBreakdown.map((e,t)=>(0,s.jsx)(_.b,{fill:G[t%G.length]},"cell-".concat(t)))}),(0,s.jsx)(S.D,{verticalAlign:"bottom",height:36,formatter:e=>(0,s.jsx)("span",{className:"text-gray-400 text-xs ml-2",children:e})}),(0,s.jsx)(f.u,{contentStyle:{backgroundColor:"#161B22",borderColor:"rgba(255,255,255,0.1)",borderRadius:"8px"},itemStyle:{color:"#fff"}})]})}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500 text-sm",children:"No data available"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:null==O?void 0:null===(e=O.leadStats)||void 0===e?void 0:e.totalLeads}),(0,s.jsx)("p",{className:"text-[10px] text-gray-500 font-medium",children:"TOTAL"})]})})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-card border border-border/50 rounded-xl p-6 shadow-soft",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent activity"}),(0,s.jsx)("div",{className:"space-y-4",children:(null==O?void 0:null===(t=O.recentActivity)||void 0===t?void 0:t.length)>0?O.recentActivity.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start pb-4 border-b border-white/5 last:border-0 last:pb-0",children:[(0,s.jsx)("div",{className:"mt-1 min-w-[32px]",children:(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary shadow-[0_0_8px_rgba(249,115,22,0.5)]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-white",children:e.title}),(0,s.jsxs)("div",{className:"flex items-center mt-1 space-x-2",children:[(0,s.jsx)(u.Z,{className:"h-3 w-3 text-gray-500"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()}),(0,s.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded bg-white/5 text-gray-400 capitalize",children:e.status})]})]})]},t)):(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent activity."})})]}),(0,s.jsxs)("div",{className:"bg-card border border-border/50 rounded-xl p-6 shadow-soft",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Lead status breakdown"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(L,{label:"New Leads",count:null==O?void 0:null===(a=O.leadStats)||void 0===a?void 0:a.new_leads,total:null==O?void 0:null===(h=O.leadStats)||void 0===h?void 0:h.totalLeads,color:"bg-blue-500"}),(0,s.jsx)(L,{label:"Contacted",count:null==O?void 0:null===(m=O.leadStats)||void 0===m?void 0:m.contacted_leads,total:null==O?void 0:null===(k=O.leadStats)||void 0===k?void 0:k.totalLeads,color:"bg-yellow-500"}),(0,s.jsx)(L,{label:"Qualified",count:null==O?void 0:null===(B=O.leadStats)||void 0===B?void 0:B.qualified_leads,total:null==O?void 0:null===(R=O.leadStats)||void 0===R?void 0:R.totalLeads,color:"bg-orange-500"}),(0,s.jsx)(L,{label:"Closed / Won",count:null==O?void 0:null===(D=O.leadStats)||void 0===D?void 0:D.closed_leads,total:null==O?void 0:null===(A=O.leadStats)||void 0===A?void 0:A.totalLeads,color:"bg-green-500"})]})]})]})]})})}function C(e){let{title:t,value:a,subValue:l,icon:d,trend:n,isCurrency:o}=e,i="up"===n;return(0,s.jsxs)("div",{className:"bg-card border border-border/50 rounded-xl p-5 shadow-soft hover:border-primary/30 transition-colors group",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-lg bg-[#0E1117] border border-white/5 text-primary group-hover:scale-110 transition-transform duration-300",children:(0,s.jsx)(d,{className:"h-6 w-6"})}),i&&(0,s.jsx)(h.Z,{className:"h-4 w-4 text-green-500"}),!i&&"neutral"!==n&&(0,s.jsx)(m.Z,{className:"h-4 w-4 text-red-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-400",children:t}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-white mt-1",children:a}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1 flex items-center",children:l})]})]})}function L(e){let{label:t,count:a,total:l,color:d}=e,n=l>0?Math.round(a/l*100):0;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[(0,s.jsx)("span",{className:"text-gray-300",children:t}),(0,s.jsxs)("span",{className:"text-white font-medium",children:[a," ",(0,s.jsxs)("span",{className:"text-gray-600 text-xs",children:["(",n,"%)"]})]})]}),(0,s.jsx)("div",{className:"h-2 w-full bg-[#0E1117] rounded-full overflow-hidden border border-white/5",children:(0,s.jsx)("div",{className:"h-full ".concat(d," opacity-80 shadow-[0_0_10px_rgba(255,255,255,0.2)] transition-all duration-1000"),style:{width:"".concat(n,"%")}})})]})}}},function(e){e.O(0,[1664,9638,980,9701,195,9774,2888,179],function(){return e(e.s=48178)}),_N_E=e.O()}]);