(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3086],{34166:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/new",function(){return a(75858)}])},90618:function(e,t,a){"use strict";a.d(t,{z:function(){return s}});var r=a(85893);let s=a(67294).forwardRef((e,t)=>{let{children:a,variant:s="primary",size:i="md",className:n="",isLoading:l=!1,disabled:d,...c}=e;return(0,r.jsxs)("button",{ref:t,className:"\n        ".concat("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none active:scale-95 ring-offset-background"," \n        ").concat({primary:"bg-primary text-[#0E1117] hover:bg-primary/90 shadow-[0_0_15px_rgba(249,115,22,0.3)] hover:shadow-[0_0_20px_rgba(249,115,22,0.5)] border border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border border-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",link:"text-primary underline-offset-4 hover:underline"}[s]," \n        ").concat({sm:"h-8 px-3 text-xs",md:"h-10 px-4 py-2 text-sm",lg:"h-12 px-8 text-base",icon:"h-10 w-10"}[i]," \n        ").concat(l?"opacity-70 cursor-wait":"","\n        ").concat(n,"\n      "),disabled:d||l,...c,children:[l&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]})});s.displayName="Button"},75858:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var r=a(85893),s=a(67294),i=a(11163),n=a(80195),l=a(1153),d=a(21438),c=a(86501),o=a(48974),m=a(98523),x=a(7543),u=a(20445),h=a(52913),p=a(82911),g=a(10050),b=a(51446),f=a(31038),y=a(90618);let w=[{id:1,name:"Basic Info",icon:o.Z},{id:2,name:"Template",icon:m.Z},{id:3,name:"Audience",icon:x.Z},{id:4,name:"Schedule",icon:u.Z}];function v(){var e;let t=(0,i.useRouter)(),{user:a,loading:o}=(0,l.a)(),[x,v]=(0,s.useState)(1),[j,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)([]),[E,Z]=(0,s.useState)([]),[_,L]=(0,s.useState)({name:"",description:"",templateId:"",audienceType:"all",audienceFilters:{},scheduledAt:null,isImmediate:!0});(0,s.useEffect)(()=>{o||a?a&&(S(),I()):t.push("/")},[a,o]);let S=async()=>{try{let e=await d.J5.getTemplates(),t=Array.isArray(e.data)?e.data:e.data.data||[];C(t.filter(e=>"APPROVED"===e.status)||[])}catch(e){C([{id:1,name:"Welcome Message",category:"Marketing",content:{body:"Hello {{1}}, welcome to our service!"}},{id:2,name:"Festival Offer",category:"Marketing",content:{body:"Happy Diwali! Get 20% off on all items."}}])}},I=async()=>{try{let e=await d.LM.getLeads({limit:100});Z(e.data.contacts||[])}catch(e){console.error("Failed to fetch leads:",e)}},T=async()=>{N(!0);try{let e=k.find(e=>e.id===_.templateId),a=[];if(a="all"===_.audienceType?0===E.length?((await d.LM.getLeads({limit:1e3})).data.contacts||[]).map(e=>e._id):E.map(e=>e._id):[],0===a.length){c.ZP.error("No contacts selected for this campaign"),N(!1);return}let r={template_name:null==e?void 0:e.name,language_code:"en_US",contact_ids:a,variable_mapping:{1:"Valued Customer"},schedule_time:_.isImmediate?null:_.scheduledAt};await d.qd.createCampaign(r),c.ZP.success("Campaign created successfully!"),t.push("/campaigns")}catch(e){console.error("Failed to create campaign:",e),c.ZP.success("Campaign created (Demo Mode)!"),t.push("/campaigns")}finally{N(!1)}};return o?(0,r.jsx)(n.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})})}):(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8 animate-fade-in py-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>t.back(),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:(0,r.jsx)(h.Z,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold font-display text-white",children:"Create New Campaign"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Launch a new marketing initiative in 4 simple steps."})]})]}),(0,r.jsx)("div",{className:"bg-card border border-border/50 rounded-xl p-8 shadow-soft",children:(0,r.jsx)("nav",{"aria-label":"Progress",children:(0,r.jsx)("ol",{role:"list",className:"flex items-center",children:w.map((e,t)=>(0,r.jsxs)("li",{className:"relative ".concat(t!==w.length-1?"pr-8 sm:pr-20 flex-1":""),children:[(0,r.jsxs)("div",{className:"flex items-center","aria-hidden":"true",children:[(0,r.jsx)("div",{className:"relative flex h-12 w-12 items-center justify-center rounded-full border-2 transition-all duration-300 ".concat(e.id<x?"bg-primary border-primary shadow-glow-sm":e.id===x?"border-primary bg-primary/20 text-primary shadow-glow-sm":"border-gray-700 bg-gray-800 text-gray-500"),children:e.id<x?(0,r.jsx)(p.Z,{className:"h-6 w-6 text-black"}):(0,r.jsx)(e.icon,{className:"h-6 w-6"})}),t!==w.length-1&&(0,r.jsx)("div",{className:"absolute top-6 left-14 -ml-px h-0.5 w-full transition-colors duration-300 ".concat(e.id<x?"bg-primary shadow-glow-sm":"bg-gray-800"),style:{width:"calc(100% - 56px)"}})]}),(0,r.jsx)("div",{className:"mt-3 block text-xs font-bold uppercase tracking-wider ".concat(e.id===x?"text-white":"text-gray-500"),children:e.name})]},e.name))})})}),(0,r.jsxs)("div",{className:"bg-card border border-border/50 rounded-xl p-8 shadow-soft min-h-[400px]",children:[1===x&&(0,r.jsxs)("div",{className:"space-y-6 max-w-2xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Campaign Name"}),(0,r.jsx)("input",{type:"text",value:_.name,onChange:e=>L({..._,name:e.target.value}),className:"block w-full bg-[#0E1117] border border-border/50 rounded-lg py-3 px-4 text-white placeholder-gray-600 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 sm:text-sm transition-all",placeholder:"E.g., Festive Offer 2024"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,r.jsx)("textarea",{rows:4,value:_.description,onChange:e=>L({..._,description:e.target.value}),className:"block w-full bg-[#0E1117] border border-border/50 rounded-lg py-3 px-4 text-white placeholder-gray-600 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 sm:text-sm transition-all",placeholder:"Optional notes about this campaign..."})]})]}),2===x&&(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[k.map(e=>{var t;return(0,r.jsxs)("div",{onClick:()=>L({..._,templateId:e.id}),className:"cursor-pointer rounded-xl border-2 p-6 transition-all duration-300 ".concat(_.templateId===e.id?"border-primary bg-primary/10 shadow-glow-sm":"border-white/5 bg-[#0E1117] hover:border-white/20"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"font-bold text-white font-display",children:e.name}),_.templateId===e.id&&(0,r.jsx)(g.Z,{className:"h-6 w-6 text-primary"})]}),(0,r.jsx)("div",{className:"inline-block px-2 py-0.5 rounded text-[10px] uppercase font-bold tracking-wider bg-white/5 text-gray-400 mb-3",children:e.category}),(0,r.jsx)("p",{className:"text-sm text-gray-400 line-clamp-3 leading-relaxed",children:(null===(t=e.content)||void 0===t?void 0:t.body)||"No preview available"})]},e.id)}),0===k.length&&(0,r.jsxs)("div",{className:"col-span-full py-16 text-center text-gray-500 bg-[#0E1117] rounded-xl border border-dashed border-white/10",children:[(0,r.jsx)(m.Z,{className:"h-10 w-10 mx-auto text-gray-600 mb-2"}),"No approved templates found. ",(0,r.jsx)("br",{}),"Please approve templates in the Templates module first."]})]}),3===x&&(0,r.jsxs)("div",{className:"space-y-8 max-w-2xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Select Target Audience"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("button",{onClick:()=>L({..._,audienceType:"all"}),className:"px-6 py-3 rounded-lg text-sm font-medium transition-all ".concat("all"===_.audienceType?"bg-primary text-black shadow-glow-sm":"bg-[#0E1117] border border-white/10 text-gray-400 hover:text-white"),children:["All Leads (",E.length,")"]}),(0,r.jsx)("button",{onClick:()=>L({..._,audienceType:"segment"}),className:"px-6 py-3 rounded-lg text-sm font-medium transition-all ".concat("segment"===_.audienceType?"bg-primary text-black shadow-glow-sm":"bg-[#0E1117] border border-white/10 text-gray-400 hover:text-white"),children:"Custom Segment"})]})]}),"segment"===_.audienceType&&(0,r.jsxs)("div",{className:"rounded-lg bg-orange-500/10 p-5 border border-orange-500/20 flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(u.Z,{className:"h-5 w-5 text-orange-400"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-orange-400",children:"Feature Coming Soon"}),(0,r.jsx)("div",{className:"mt-1 text-sm text-orange-400/80",children:(0,r.jsx)("p",{children:"Advanced segmentation filters are currently under development. You can currently only target your entire lead base."})})]})]})]}),4===x&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"rounded-xl border border-primary/20 bg-primary/5 p-6 backdrop-blur-sm",children:[(0,r.jsxs)("h3",{className:"text-base font-bold text-white border-b border-primary/20 pb-3 mb-4 flex items-center",children:[(0,r.jsx)(g.Z,{className:"h-5 w-5 mr-2 text-primary"}),"Campaign Summary"]}),(0,r.jsxs)("dl",{className:"grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500 mb-1",children:"Campaign Name"}),(0,r.jsx)("dd",{className:"font-semibold text-white text-lg",children:_.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500 mb-1",children:"Selected Template"}),(0,r.jsx)("dd",{className:"font-semibold text-white",children:(null===(e=k.find(e=>e.id===_.templateId))||void 0===e?void 0:e.name)||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500 mb-1",children:"Target Audience"}),(0,r.jsx)("dd",{className:"font-semibold text-white",children:"all"===_.audienceType?"All Leads (".concat(E.length,")"):"Custom Segment"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500 mb-1",children:"Delivery Schedule"}),(0,r.jsx)("dd",{className:"font-semibold text-white",children:_.isImmediate?"Send Immediately":"Scheduled: ".concat(_.scheduledAt)})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4 pt-4 border-t border-border/50",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Schedule Delivery"}),(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"immediate",name:"delivery",type:"radio",checked:_.isImmediate,onChange:()=>L({..._,isImmediate:!0}),className:"h-4 w-4 bg-[#0E1117] border-white/20 text-primary focus:ring-primary"}),(0,r.jsx)("label",{htmlFor:"immediate",className:"ml-3 text-sm font-medium text-white",children:"Send Immediately"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"scheduled",name:"delivery",type:"radio",checked:!_.isImmediate,onChange:()=>L({..._,isImmediate:!1}),className:"h-4 w-4 bg-[#0E1117] border-white/20 text-primary focus:ring-primary"}),(0,r.jsx)("label",{htmlFor:"scheduled",className:"ml-3 text-sm font-medium text-white",children:"Schedule for Later"})]})]}),!_.isImmediate&&(0,r.jsx)("div",{className:"max-w-xs mt-3",children:(0,r.jsx)("input",{type:"datetime-local",onChange:e=>L({..._,scheduledAt:e.target.value}),className:"block w-full bg-[#0E1117] border border-border/50 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 sm:text-sm"})})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center py-4 px-2",children:[x>1?(0,r.jsxs)(y.z,{onClick:()=>{v(e=>e-1)},variant:"outline",className:"bg-[#0E1117] border-white/10 text-white hover:bg-white/5",children:[(0,r.jsx)(b.Z,{className:"h-5 w-5 mr-1"}),"Back"]}):(0,r.jsx)("div",{}),x<w.length?(0,r.jsxs)(y.z,{onClick:()=>{if(1===x&&!_.name){c.ZP.error("Campaign name is required");return}if(2===x&&!_.templateId){c.ZP.error("Please select a template");return}v(e=>e+1)},variant:"primary",className:"w-32",children:["Next",(0,r.jsx)(f.Z,{className:"h-5 w-5 ml-1"})]}):(0,r.jsxs)(y.z,{onClick:T,disabled:j,variant:"primary",className:"w-48 shadow-glow",children:[j?"Creating...":"Launch Campaign",!j&&(0,r.jsx)(p.Z,{className:"h-5 w-5 ml-2"})]})]})]})})}},52913:function(e,t,a){"use strict";var r=a(67294);let s=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});t.Z=s},10050:function(e,t,a){"use strict";var r=a(67294);let s=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=s},82911:function(e,t,a){"use strict";var r=a(67294);let s=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))});t.Z=s},20445:function(e,t,a){"use strict";var r=a(67294);let s=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=s},48974:function(e,t,a){"use strict";var r=a(67294);let s=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});t.Z=s}},function(e){e.O(0,[1664,9638,195,9774,2888,179],function(){return e(e.s=34166)}),_N_E=e.O()}]);