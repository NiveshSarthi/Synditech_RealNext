(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[131],{2735:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/flows",function(){return r(92509)}])},90618:function(e,t,r){"use strict";r.d(t,{z:function(){return s}});var a=r(85893);let s=r(67294).forwardRef((e,t)=>{let{children:r,variant:s="primary",size:n="md",className:i="",isLoading:o=!1,disabled:l,...c}=e;return(0,a.jsxs)("button",{ref:t,className:"\n        ".concat("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none active:scale-95 ring-offset-background"," \n        ").concat({primary:"bg-primary text-[#0E1117] hover:bg-primary/90 shadow-[0_0_15px_rgba(249,115,22,0.3)] hover:shadow-[0_0_20px_rgba(249,115,22,0.5)] border border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border border-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",link:"text-primary underline-offset-4 hover:underline"}[s]," \n        ").concat({sm:"h-8 px-3 text-xs",md:"h-10 px-4 py-2 text-sm",lg:"h-12 px-8 text-base",icon:"h-10 w-10"}[n]," \n        ").concat(o?"opacity-70 cursor-wait":"","\n        ").concat(i,"\n      "),disabled:l||o,...c,children:[o&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r]})});s.displayName="Button"},92509:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var a=r(85893),s=r(67294),n=r(80195),i=r(1153),o=r(11163),l=r(21438),c=r(52418),d=r(78357);let m=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))});var u=r(54510),x=r(90618);let h=[{id:"welcome-sequence",name:"Welcome Sequence",description:"Send welcome message, wait 2 hours, send product info, verify reply.",icon:c.Z,tags:["Webhook","Wait","WhatsApp","If"]},{id:"lead-nurturing",name:"Lead Nurturing",description:"Score leads >= 50, send offer. Else send educational content.",icon:d.Z,tags:["Trigger","Switch","WhatsApp","CRM Update"]},{id:"abandoned-cart",name:"Abandoned Cart Recovery",description:"Remind after 1h. Check purchase. Send discount if needed.",icon:m,tags:["Webhook","Wait","MySQL","WhatsApp"]},{id:"customer-feedback",name:"Customer Feedback",description:"Request feedback post-purchase. Alert support if rating < 3.",icon:c.Z,tags:["Trigger","Wait","WhatsApp","Filter"]},{id:"re-engagement",name:"Re-engagement Campaign",description:"Win-back inactive users after 30 days with special discounts.",icon:u.Z,tags:["Cron","MySQL","WhatsApp","Tag"]}];function p(e){let{onUseTemplate:t}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:h.map(e=>(0,a.jsxs)("div",{className:"bg-[#0E1117] border border-border/50 rounded-xl p-6 shadow-sm hover:border-primary/50 transition-all duration-300 flex flex-col h-full group",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsx)("div",{className:"p-3 bg-primary/10 rounded-lg text-primary group-hover:bg-primary group-hover:text-black transition-colors",children:(0,a.jsx)(e.icon,{className:"h-6 w-6"})})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-2",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-6 flex-grow leading-relaxed",children:e.description}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:e.tags.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-[10px] font-medium bg-white/5 text-gray-400 border border-white/10",children:e},e))}),(0,a.jsx)(x.z,{onClick:()=>t(e),variant:"primary",className:"w-full shadow-glow-sm",children:"Use Template"})]},e.id))})}var f=r(78680),g=r(48974),b=r(83436),w=r(21321);function v(){let[e,t]=(0,s.useState)([]),[r,c]=(0,s.useState)(!0),[d,m]=(0,s.useState)("my_flows"),{user:h,loading:v}=(0,i.a)(),y=(0,o.useRouter)();(0,s.useEffect)(()=>{v||h?h&&"my_flows"===d&&j():y.push("/")},[h,v,d]);let j=async()=>{c(!0);try{let e=(await l._b.getWorkflows()).data;t(Array.isArray(e)?e:e.data||[])}catch(e){console.error("Error fetching workflows:",e)}finally{c(!1)}},N=async e=>{try{await l._b.createWorkflow({name:"".concat(e.name," COPY"),active:!1,nodes:[],settings:{description:e.description}}),m("my_flows"),j()}catch(e){var t,r;console.error("Failed to create from template:",e),(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||e.message}},k=async(e,t)=>{try{"active"===t?await l._b.deactivateWorkflow(e):await l._b.activateWorkflow(e),j()}catch(e){console.error("Error toggling status:",e)}},_=e=>{if(e&&e.toString().startsWith("mock-")){alert("This is a simulated workflow (Mock Mode). Real n8n editor is not available.");return}window.open("http://localhost:5678/workflow/"+e,"_blank")};return v?(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})})}):(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"space-y-8 animate-fade-in content-container",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold font-display tracking-tight text-white",children:"Automation Flows"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Design and manage your intelligent WhatsApp automation bots."})]}),"my_flows"===d&&(0,a.jsxs)(x.z,{onClick:()=>m("templates"),variant:"primary",className:"shadow-glow-sm",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 mr-2"}),"New Flow"]})]}),(0,a.jsx)("div",{className:"border-b border-border/50",children:(0,a.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,a.jsx)("button",{onClick:()=>m("my_flows"),className:"".concat("my_flows"===d?"border-primary text-primary":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-700"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"),children:"My Flows"}),(0,a.jsx)("button",{onClick:()=>m("templates"),className:"".concat("templates"===d?"border-primary text-primary":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-700"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"),children:"Templates Library"})]})}),"templates"===d?(0,a.jsx)("div",{className:"bg-card border border-border/50 rounded-xl p-6 shadow-soft",children:(0,a.jsx)(p,{onUseTemplate:N})}):(0,a.jsx)(a.Fragment,{children:r?(0,a.jsx)("div",{className:"flex justify-center py-20",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):0===e.length?(0,a.jsxs)("div",{className:"text-center py-20 bg-card/30 border border-white/5 rounded-2xl border-dashed",children:[(0,a.jsx)("div",{className:"h-20 w-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(u.Z,{className:"h-10 w-10 text-primary"})}),(0,a.jsx)("h3",{className:"text-xl font-medium text-white",children:"No workflows found"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500 max-w-sm mx-auto",children:"Get started by creating your first intelligent automation flow."}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)(x.z,{onClick:()=>m("templates"),variant:"primary",children:[(0,a.jsx)(f.Z,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Create New Flow"]})})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-card border border-border/50 rounded-xl overflow-hidden shadow-soft hover:border-primary/50 transition-all duration-300 group flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"p-6 flex-1",children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10 ".concat("active"===e.status?"text-green-400":"text-gray-400"),children:(0,a.jsx)(u.Z,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold font-display text-white leading-tight line-clamp-1",title:e.name,children:e.name}),(0,a.jsx)("span",{className:"mt-1 inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ".concat("active"===e.status?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-gray-500/10 text-gray-400 border border-gray-500/20"),children:e.status?e.status:"DRAFT"})]})]})}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-400 line-clamp-3 leading-relaxed",children:e.description||"No description provided."})})]}),(0,a.jsxs)("div",{className:"bg-[#0E1117] px-6 py-4 flex justify-between items-center border-t border-border/50",children:[(0,a.jsxs)("button",{onClick:()=>_(e.n8n_workflow_id),className:"text-sm font-medium text-blue-400 hover:text-blue-300 flex items-center transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-1.5"})," Open Editor"]}),"active"===e.status?(0,a.jsxs)("button",{onClick:()=>k(e.n8n_workflow_id,"active"),className:"text-sm font-medium text-yellow-500 hover:text-yellow-400 flex items-center transition-colors",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-1.5"})," Pause"]}):(0,a.jsxs)("button",{onClick:()=>k(e.n8n_workflow_id,"inactive"),className:"text-sm font-medium text-green-500 hover:text-green-400 flex items-center transition-colors",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-1.5"})," Activate"]})]})]},e.id))})})]})})}},83436:function(e,t,r){"use strict";var a=r(67294);let s=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"}))});t.Z=s},48974:function(e,t,r){"use strict";var a=r(67294);let s=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});t.Z=s},21321:function(e,t,r){"use strict";var a=r(67294);let s=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))});t.Z=s},78680:function(e,t,r){"use strict";var a=r(67294);let s=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});t.Z=s}},function(e){e.O(0,[1664,9638,195,9774,2888,179],function(){return e(e.s=2735)}),_N_E=e.O()}]);