(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9038],{52268:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/team",function(){return r(87366)}])},90618:function(e,t,r){"use strict";r.d(t,{z:function(){return s}});var a=r(85893);let s=r(67294).forwardRef((e,t)=>{let{children:r,variant:s="primary",size:n="md",className:l="",isLoading:o=!1,disabled:i,...c}=e;return(0,a.jsxs)("button",{ref:t,className:"\n        ".concat("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none active:scale-95 ring-offset-background"," \n        ").concat({primary:"bg-primary text-[#0E1117] hover:bg-primary/90 shadow-[0_0_15px_rgba(249,115,22,0.3)] hover:shadow-[0_0_20px_rgba(249,115,22,0.5)] border border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border border-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",link:"text-primary underline-offset-4 hover:underline"}[s]," \n        ").concat({sm:"h-8 px-3 text-xs",md:"h-10 px-4 py-2 text-sm",lg:"h-12 px-8 text-base",icon:"h-10 w-10"}[n]," \n        ").concat(o?"opacity-70 cursor-wait":"","\n        ").concat(l,"\n      "),disabled:i||o,...c,children:[o&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r]})});s.displayName="Button"},87366:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(85893),s=r(67294),n=r(11163),l=r(80195),o=r(87066),i=r(86501),c=r(78357),d=r(78680),m=r(65350);let x=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"}))});var u=r(76249),h=r(31415),p=r(90618);let g="http://localhost:5001";function f(){let e=(0,n.useRouter)(),[t,r]=(0,s.useState)([]),[f,b]=(0,s.useState)([]),[v,y]=(0,s.useState)(!0),[w,j]=(0,s.useState)(!1),[N,k]=(0,s.useState)({name:"",email:"",role:"user",role_id:null,department:""});(0,s.useEffect)(()=>{(()=>{let t=localStorage.getItem("user");if(t)try{var r;let a=JSON.parse(t),s=null==a?void 0:null===(r=a.context)||void 0===r?void 0:r.tenantRole;if("admin"!==s&&"manager"!==s){i.ZP.error("You do not have permission to access this page"),e.push("/analytics");return}}catch(e){console.error("Error parsing user data:",e)}})()},[e]),(0,s.useEffect)(()=>{_(),E()},[]);let _=async()=>{try{let e=localStorage.getItem("access_token"),t=await o.Z.get("".concat(g,"/api/team"),{headers:{Authorization:"Bearer ".concat(e)}});r(t.data.data)}catch(e){console.error("Error fetching team members:",e),i.ZP.error("Failed to load team members")}finally{y(!1)}},E=async()=>{try{let e=localStorage.getItem("access_token"),t=await o.Z.get("".concat(g,"/api/roles"),{headers:{Authorization:"Bearer ".concat(e)}});b(t.data.data.tenant_roles||[])}catch(e){console.error("Error fetching roles:",e)}},Z=async e=>{e.preventDefault();try{let e=localStorage.getItem("access_token");await o.Z.post("".concat(g,"/api/team/invite"),N,{headers:{Authorization:"Bearer ".concat(e)}}),j(!1),k({name:"",email:"",role:"user",role_id:null,department:""}),_(),i.ZP.success("Team member invited successfully!")}catch(e){var t,r;i.ZP.error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Failed to invite member")}},C=async(e,t)=>{try{let r=localStorage.getItem("access_token");await o.Z.patch("".concat(g,"/api/team/").concat(e),{role_id:t},{headers:{Authorization:"Bearer ".concat(r)}}),_(),i.ZP.success("Role updated successfully")}catch(e){var r,a;i.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error)||"Failed to update role")}},S=async(e,t)=>{if(confirm("Are you sure you want to remove ".concat(t,"?")))try{let t=localStorage.getItem("access_token");await o.Z.delete("".concat(g,"/api/team/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),_(),i.ZP.success("Member removed successfully")}catch(e){var r,a;i.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error)||"Failed to remove member")}};return v?(0,a.jsx)(l.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):(0,a.jsxs)(l.Z,{children:[(0,a.jsxs)("div",{className:"space-y-8 animate-fade-in content-container",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white tracking-tight flex items-center gap-3",children:[(0,a.jsx)(c.Z,{className:"w-8 h-8 text-primary"}),"Team Management"]}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Manage your team members and their roles"})]}),(0,a.jsxs)(p.z,{onClick:()=>j(!0),variant:"primary",className:"shadow-glow-sm",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"Invite Member"]})]}),(0,a.jsx)("div",{className:"bg-card border border-border/50 rounded-xl overflow-hidden shadow-soft",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-border/50",children:[(0,a.jsx)("thead",{className:"bg-[#0E1117]",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Member"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Department"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Joined"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-border/50",children:0===t.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"px-6 py-12 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(c.Z,{className:"h-12 w-12 text-gray-600 mb-3"}),(0,a.jsx)("p",{className:"text-gray-400",children:"No team members yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Invite your first team member to get started"})]})})}):t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/20 border border-primary/30 flex items-center justify-center text-primary font-semibold",children:e.name.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-white flex items-center gap-2",children:[e.name,e.is_owner&&(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs bg-yellow-500/10 text-yellow-400 rounded-full border border-yellow-500/20",children:"Owner"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400 flex items-center gap-1",children:[(0,a.jsx)(m.Z,{className:"h-3 w-3"}),e.email]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.is_owner?(0,a.jsx)("span",{className:"text-sm text-white font-medium",children:"Owner"}):(0,a.jsxs)("select",{value:e.role_id||"",onChange:t=>C(e.user_id,t.target.value||null),className:"text-sm bg-[#161B22] border border-border/50 rounded-lg px-3 py-1.5 text-white focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select Role"}),f.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-400 flex items-center gap-1",children:e.department?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{className:"h-3 w-3"}),e.department]}):(0,a.jsx)("span",{className:"text-gray-600",children:"-"})})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2.5 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full border ".concat("active"===e.status?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:new Date(e.joined_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:!e.is_owner&&(0,a.jsx)("button",{onClick:()=>S(e.user_id,e.name),className:"p-2 rounded-lg text-gray-400 hover:text-red-400 hover:bg-red-500/10 transition-colors",title:"Remove member",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})})})]},e.id))})]})})})]}),w&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-card border border-border/50 rounded-xl shadow-2xl p-8 max-w-md w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Invite Team Member"}),(0,a.jsx)("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)(h.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name *"}),(0,a.jsx)("input",{type:"text",required:!0,value:N.name,onChange:e=>k({...N,name:e.target.value}),className:"w-full px-4 py-2.5 bg-[#161B22] border border-border/50 rounded-lg text-white placeholder-gray-500 focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"John Doe"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email *"}),(0,a.jsx)("input",{type:"email",required:!0,value:N.email,onChange:e=>k({...N,email:e.target.value}),className:"w-full px-4 py-2.5 bg-[#161B22] border border-border/50 rounded-lg text-white placeholder-gray-500 focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"john@company.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role"}),(0,a.jsxs)("select",{value:N.role_id||"",onChange:e=>k({...N,role_id:e.target.value||null}),className:"w-full px-4 py-2.5 bg-[#161B22] border border-border/50 rounded-lg text-white focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select Role"}),f.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Department (Optional)"}),(0,a.jsx)("input",{type:"text",value:N.department,onChange:e=>k({...N,department:e.target.value}),className:"w-full px-4 py-2.5 bg-[#161B22] border border-border/50 rounded-lg text-white placeholder-gray-500 focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Sales, Marketing, etc."})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsx)(p.z,{type:"button",onClick:()=>j(!1),variant:"outline",className:"flex-1",children:"Cancel"}),(0,a.jsx)(p.z,{type:"submit",variant:"primary",className:"flex-1",children:"Send Invite"})]})]})]})})]})}},65350:function(e,t,r){"use strict";var a=r(67294);let s=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))});t.Z=s},78680:function(e,t,r){"use strict";var a=r(67294);let s=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});t.Z=s},76249:function(e,t,r){"use strict";var a=r(67294);let s=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});t.Z=s}},function(e){e.O(0,[1664,9638,195,9774,2888,179],function(){return e(e.s=52268)}),_N_E=e.O()}]);